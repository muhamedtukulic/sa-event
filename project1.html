<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SA Events</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .edit-btn,
      .delete-btn {
        background-color: #f82249;
        color: white;
        border: none;
        padding: 5px 10px;
        margin: 5px;
        cursor: pointer;
        border-radius: 4px;
      }

      .edit-btn:hover,
      .delete-btn:hover {
        background-color: #d81b3f;
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="navbar">
        <div class="navbar-brand">
          <p style="font-size: 30px">
            <span style="color: #f82249">SA</span> Events
          </p>
        </div>
        <ul class="navbar-nav">
          <li><a href="#home">Home</a></li>
          <li><a href="upevents.html">Events</a></li>
          <li><a href="buycard.html">Buy card</a></li>
          <li><a href="signup.html">SignUp</a></li>
        </ul>
      </nav>
    </header>

    <section id="intro">
      <div class="intro-container wow fadeIn">
        <h1 class="mb-4 pb-0">
          All events in<br /><span>Sarajevo</span> at one place.
        </h1>
        <p class="mb-4 pb-0">Sarajevo, Bosnia & Hercegovina, 2025.</p>
      </div>
    </section>

    <section id="about">
      <div class="container">
        <div class="row">
          <h2 style="color: #f82249">About us</h2>
          <p>
            Rajvosa Events allows you to get tickets for events in Sarajevo in
            the field of theater, film, music, sports and family attractions at
            any time of the day or night, from any location in the world.
            Tickets purchased online are delivered via email (E-Ticket).
            <br />
            The goal of -Rajvosa event- is to become a one-stop shop for buying
            tickets for favorite events, which will allow users to plan their
            entertainment on time and get the best positions in the halls at
            pre-sale prices. This service allows you to stay up-to-date with
            events, choose the ones you want, order tickets on time and save the
            money you would have spent on transportation to the place of
            purchase and the time you would have lost waiting in lines. You can
            make additional savings on shipping by purchasing multiple tickets
            at once.
          </p>
        </div>
      </div>
    </section>

    <hr class="custom-hr" />

    <section id="faq">
      <div class="faq-section">
        <h2 style="color: #f82249">Frequently Asked Questions</h2>
        <br />
        <div class="faq-item">
          <button class="faq-toggle">What payment method do you accept?</button>
          <div class="faq-content">
            <p>
              CREDIT CARD. This service is made possible by Monri Payment System
              and UniCredit Bank performs processing and billing. Monri Payment
              System keeps all your data strictly confidential. After each
              successful transaction, you will receive a confirmation of the
              completed payment by email. INVOICE. Rajvosa events has made it
              possible to purchase tickets for a specific event with the option
              of paying by invoice. This option is convenient for people who
              have SMS banking.
            </p>
          </div>
        </div>
        <div class="faq-item">
          <button class="faq-toggle">How are tickets delivered?</button>
          <div class="faq-content">
            <p>
              After successful payment, the tickets are automatically delivered
              to the email address you entered during registration. Tickets are
              delivered in PDF format. file. Tickets must be printed.
            </p>
          </div>
        </div>
        <div class="faq-item">
          <button class="faq-toggle">Do I have any additional costs?</button>
          <div class="faq-content">
            <p>
              All tickets sold by the Rajvosa events service are sold
              exclusively as an agent, and the ticket prices already include
              VAT. The ticket price is determined by the organizer, and Rajvosa
              events may not change it. Costs when paying by credit card are
              shown at checkout and increased by the amount of the bank
              commission.
            </p>
          </div>
        </div>
        <div class="faq-item">
          <button class="faq-toggle">What if the event is cancelled?</button>
          <div class="faq-content">
            <p>
              If the event is cancelled, the Organizer is responsible for
              refunding the money you paid for the ticket. It does not include
              delivery costs or other costs incurred during the transaction. The
              money will be returned only with a confirmation of payment and a
              copy of the ticket or the received email with a unique code. If
              the event is extended for another date, the money will not be
              returned until the moment of complete cancellation of the event by
              the organizer or unless the Organizer decides otherwise in favor
              of its customers. Rajvosa events always stands by its clients and
              customers and will always protect their rights.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="comments">
      <div class="container">
        <h2 style="color: #f82249">User Comments</h2>
        <form id="comment-form">
          <div>
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required />
          </div>
          <div>
            <label for="comment">Comment:</label>
            <textarea id="comment" name="comment" rows="4" required></textarea>
          </div>
          <button type="submit">Add Comment</button>
        </form>
        <div id="comments-container">
          <!-- Comments will be dynamically loaded here -->
        </div>
        <div id="message"></div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="social-links">
          <a
            href="https://www.facebook.com/"
            class="social-link"
            target="_blank"
            ><img src="images/SLIKE/fp.jpg" alt="Facebook"
          /></a>
          <a
            href="https://twitter.com/?lang=en"
            class="social-link"
            target="_blank"
            ><img src="images/SLIKE/ptica.jpg" alt="Twitter"
          /></a>
          <a
            href="https://www.instagram.com/"
            class="social-link"
            target="_blank"
            ><img src="images/SLIKE/instaaa.jpg" alt="Instagram"
          /></a>
          <a href="https://ba.linkedin.com/" class="social-link" target="_blank"
            ><img src="images/SLIKE/link.jpg" alt="LinkedIn"
          /></a>
        </div>
        <h4 style="color: #f82249">CONTACT US</h4>
        <p><strong>Phone:</strong> +387 61 235 883</p>
        <p><strong>Email: </strong>faruk.curevac@stu.ibu.edu.ba</p>
        <p><strong>Email: </strong>muhamed.tukulic@stu.ibu.edu.ba</p>
        <br />
        <br />

        <p>&copy; 2024 SA Events. All rights reserved.</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        function loadComments() {
          fetch("/api/comments")
            .then((res) => res.json())
            .then((comments) => {
              displayComments(comments);
            })
            .catch((err) => {
              console.error("Failed to load comments:", err);
            });
        }
    
        function displayComments(comments) {
          let output = "";
          comments.forEach((comment, index) => {
            const date = new Date(comment.createdAt).toISOString().split("T")[0];
            output += `
              <div class="comment" data-index="${index}">
                <p><strong>${comment.nameOrEmail}</strong> (${date})</p>
                <p class="comment-text">${comment.text}</p>
                <button class="edit-btn">Edit</button>
                <button class="delete-btn">Delete</button>
                <hr>
              </div>
            `;
          });
          document.getElementById("comments-container").innerHTML = output;
    
          document.querySelectorAll(".edit-btn").forEach(btn =>
            btn.addEventListener("click", editComment)
          );
          document.querySelectorAll(".delete-btn").forEach(btn =>
            btn.addEventListener("click", deleteComment)
          );
        }
    
        function addComment(event) {
          event.preventDefault();
          const username = document.getElementById("username").value;
          const commentText = document.getElementById("comment").value;
          const date = new Date().toISOString().split("T")[0];
    
          const newComment = {
            nameOrEmail: username,
            text: commentText
          };
    
          fetch("/api/comment", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(newComment),
          })
            .then((res) => res.json())
            .then((data) => {
              // Immediately add to UI
              const commentsContainer = document.getElementById("comments-container");
              const newCommentHtml = `
                <div class="comment" data-id="${Date.now()}">
                  <p><strong>${username}</strong> (${date})</p>
                  <p class="comment-text">${commentText}</p>
                  <button class="edit-btn">Edit</button>
                  <button class="delete-btn">Delete</button>
                  <hr>
                </div>
              `;
              commentsContainer.innerHTML += newCommentHtml;
    
              document.getElementById("comment-form").reset();
              showMessage(data.message || "Comment added successfully!");
    
              const commentDiv = commentsContainer.lastElementChild;
              commentDiv.querySelector(".edit-btn").addEventListener("click", editComment);
              commentDiv.querySelector(".delete-btn").addEventListener("click", deleteComment);
            })
            .catch((error) => {
              console.error("Failed to send comment:", error);
              showMessage("Error: could not save comment.");
            });
        }
    
        function editComment(event) {
          const commentDiv = event.target.closest(".comment");
          const commentText = commentDiv.querySelector(".comment-text");
    
          if (event.target.textContent === "Edit") {
            commentText.setAttribute("contenteditable", "true");
            commentText.focus();
            event.target.textContent = "Save";
          } else {
            commentText.setAttribute("contenteditable", "false");
            event.target.textContent = "Edit";
            showMessage("Comment edited (UI only).");
          }
        }
    
        function deleteComment(event) {
          const commentDiv = event.target.closest(".comment");
          commentDiv.remove();
          showMessage("Comment deleted (UI only).");
        }
    
        function showMessage(message) {
          const messageDiv = document.getElementById("message");
          messageDiv.textContent = message;
          setTimeout(() => {
            messageDiv.textContent = "";
          }, 3000);
        }
    
        document
          .getElementById("comment-form")
          .addEventListener("submit", addComment);
    
        loadComments();
      });
    </script>    

    <script src="project.js"></script>
  </body>
</html>
